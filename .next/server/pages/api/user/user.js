"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/user/user";
exports.ids = ["pages/api/user/user"];
exports.modules = {

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("bcrypt");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "nodemailer":
/*!*****************************!*\
  !*** external "nodemailer" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("nodemailer");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Fuser&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cuser.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Fuser&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cuser.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_user_user_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\user\\user.js */ \"(api)/./pages/api/user/user.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_user_user_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_user_user_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/user/user\",\n        pathname: \"/api/user/user\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_user_user_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVzZXIlMkZ1c2VyJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUN1c2VyJTVDdXNlci5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUN3RDtBQUN4RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsb0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLG9EQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHVzZXJcXFxcdXNlci5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCAnZGVmYXVsdCcpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgJ2NvbmZpZycpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdXNlci91c2VyXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdXNlci91c2VyXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Fuser&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cuser.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./controllers/user.js":
/*!*****************************!*\
  !*** ./controllers/user.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _services_user_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/user.service */ \"(api)/./services/user.service.js\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcrypt__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! nodemailer */ \"nodemailer\");\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(nodemailer__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _models_Otp__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/Otp */ \"(api)/./models/Otp.js\");\n\n\n\n\nconst generateOtp = ()=>{\n    return Math.floor(100000 + Math.random() * 900000).toString(); // Generates a 6-digit number\n};\nclass userController {\n    constructor(){\n        this.getAllUsers = async (req, res)=>{\n            try {\n                let data = await _services_user_service__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find();\n                console.log(data);\n                return res.status(200).send(data);\n            } catch (err) {\n                console.log(err);\n            }\n        };\n        this.getUsers = async (req, res)=>{\n            const id = req.params.id || req.user._id;\n            console.log(id);\n            try {\n                const data = await _services_user_service__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findById(id);\n                return res.status(200).send(data);\n            } catch (err) {\n                console.log(err);\n            }\n        };\n        this.create = async (req, res)=>{\n            try {\n                const body = req?.body;\n                console.log(req.body);\n                console.log(\"above thedata\");\n                const { email, phoneNo, firstName, lastName, password, role } = req.body;\n                const checkUser = await _services_user_service__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findOne({\n                    $or: [\n                        {\n                            email\n                        },\n                        {\n                            phoneNo\n                        }\n                    ]\n                });\n                if (checkUser) {\n                    console.log(\"checkuser\", checkUser);\n                    return res.status(400).send({\n                        message: \"Already registered with this credentials\"\n                    });\n                }\n                console.log(email, phoneNo, firstName, lastName, password);\n                let user = await _services_user_service__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create({\n                    email,\n                    phoneNo,\n                    firstName,\n                    lastName,\n                    password,\n                    role: role || 'User'\n                });\n                return res.status(200).send(user);\n            } catch (err) {\n                console.log(err);\n            }\n        };\n        this.sendOtp = async (req, res)=>{\n            try {\n                // Get email from request body\n                const { email } = req.body;\n                if (!email) {\n                    return res.status(400).json({\n                        message: 'Email is required'\n                    });\n                }\n                let otpData = await _models_Otp__WEBPACK_IMPORTED_MODULE_3__.Otp.findOne({\n                    email\n                });\n                if (otpData) return res.status(200).send({\n                    message: `OTP Already Sent to the ${email}`\n                });\n                // Generate OTP\n                const otp = generateOtp();\n                // Configure nodemailer transport (use your email service credentials)\n                let transporter = nodemailer__WEBPACK_IMPORTED_MODULE_2___default().createTransport({\n                    service: 'gmail',\n                    auth: {\n                        user: process.env.EMAIL_USER,\n                        pass: process.env.EMAIL_PASS\n                    }\n                });\n                // Email options\n                let mailOptions = {\n                    from: process.env.EMAIL_USER,\n                    to: email,\n                    subject: 'OTP from YogaArt',\n                    text: `${otp} is the OTP to register in YogaArt`\n                };\n                // Send email\n                transporter.sendMail(mailOptions, async (error, info)=>{\n                    if (error) {\n                        console.log(error);\n                        return res.status(400).json({\n                            message: 'Error sending email'\n                        });\n                    } else {\n                        console.log(\"otp send\");\n                        return;\n                    }\n                });\n                let newOtp = new _models_Otp__WEBPACK_IMPORTED_MODULE_3__.Otp({\n                    email,\n                    otp,\n                    isgenerated: true\n                });\n                await newOtp.save();\n                return res.send({\n                    message: `otp send successfully to the email ${email}`\n                });\n            } catch (err) {\n                console.log(err);\n                res.status(400).json({\n                    message: 'An error occurred'\n                });\n            }\n        };\n        this.verifyOtp = async (req, res)=>{\n            try {\n                const { email, otp } = req.body;\n                console.log(email, otp);\n                let otpData = await _models_Otp__WEBPACK_IMPORTED_MODULE_3__.Otp.findOne({\n                    email\n                });\n                if (!otpData) {\n                    return res.status(400).send({\n                        message: \"OTP expired please send again\"\n                    });\n                }\n                if (otp !== otpData.otp) return res.status(400).send({\n                    message: \"Invalid OTP\"\n                });\n                if (otp === otpData.otp) {\n                    await _models_Otp__WEBPACK_IMPORTED_MODULE_3__.Otp.findByIdAndDelete(otpData._id);\n                    return res.status(200).send({\n                        verfied: true\n                    });\n                }\n                console.log(otpData);\n                return res.send({\n                    isverified: true\n                });\n            } catch (err) {\n                console.log(err);\n            }\n        };\n        this.login = async (req, res)=>{\n            try {\n                const { email, password } = req.body;\n                const checkUser = await _services_user_service__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findOne({\n                    email\n                });\n                if (!checkUser) {\n                    return res.status(400).send({\n                        message: \"user not registered with this Email!\"\n                    });\n                }\n                const checkPw = await bcrypt__WEBPACK_IMPORTED_MODULE_1___default().compare(password, checkUser.password);\n                console.log(\"checkpw\", checkPw);\n                if (!checkPw) {\n                    return res.status(400).send({\n                        message: \"Invalid Credentials\"\n                    });\n                }\n                checkUser.lastLogin = Date.now();\n                await checkUser.save();\n                const token = await checkUser.generateAuthToken();\n                return res.status(200).send({\n                    token,\n                    role: checkUser.role\n                });\n            } catch (err) {\n                console.log(err);\n            }\n        };\n        this.update = async (req, res)=>{\n            const body = req.body;\n            const id = req?.params?.id || req.user._id;\n            console.log(id);\n            try {\n                await _services_user_service__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findByIdAndUpdate(id, body);\n                return res.status(200).send({\n                    message: \"updated successfully\"\n                });\n            } catch (err) {\n                console.log(err);\n            }\n        };\n        this.loginWithGoogle = async (req, res)=>{};\n        this.delete = async (req, res)=>{};\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new userController());\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBcUI7Z0JBQzVEO2dCQUNBSCxVQUFVbUMsU0FBUyxHQUFHQyxLQUFLQyxHQUFHO2dCQUM5QixNQUFNckMsVUFBVTJCLElBQUk7Z0JBQ3BCLE1BQU1XLFFBQVEsTUFBTXRDLFVBQVV1QyxpQkFBaUI7Z0JBQy9DLE9BQU83RCxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUFFc0Q7b0JBQVF2QyxNQUFLQyxVQUFVRCxJQUFJO2dCQUFDO1lBQzVELEVBQUUsT0FBT2QsS0FBSztnQkFDWkosUUFBUUMsR0FBRyxDQUFDRztZQUNkO1FBQ0Y7YUFDQXVELFNBQVMsT0FBTy9ELEtBQUtDO1lBQ25CLE1BQU1lLE9BQU9oQixJQUFJZ0IsSUFBSTtZQUNyQixNQUFNTixLQUFNVixLQUFLVyxRQUFRRCxNQUFNVixJQUFJWSxJQUFJLENBQUNDLEdBQUc7WUFDM0NULFFBQVFDLEdBQUcsQ0FBQ0s7WUFDWixJQUFJO2dCQUVGLE1BQU1yQixnRkFBOEIsQ0FBQ3FCLElBQUlNO2dCQUN6QyxPQUFPZixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUFFbUIsU0FBUztnQkFBdUI7WUFDaEUsRUFBRSxPQUFPbEIsS0FBSztnQkFDWkosUUFBUUMsR0FBRyxDQUFDRztZQUNkO1FBQ0Y7YUFDQXlELGtCQUFrQixPQUFPakUsS0FBS0MsT0FFOUI7YUFDQWlFLFNBQVMsT0FBT2xFLEtBQUtDLE9BQVM7O0FBQ2hDO0FBRUEsaUVBQWUsSUFBSUgsZ0JBQWdCQSxFQUFDIiwic291cmNlcyI6WyJGOlxceW9nYUFwcFxcY29udHJvbGxlcnNcXHVzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHVzZXJTZXJ2aWNlcyBmcm9tICcuLi9zZXJ2aWNlcy91c2VyLnNlcnZpY2UnXHJcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0J1xyXG5pbXBvcnQgbm9kZW1haWxlciBmcm9tICdub2RlbWFpbGVyJ1xyXG5pbXBvcnQge090cH0gZnJvbSBcIi4uL21vZGVscy9PdHBcIlxyXG5cclxuXHJcbmNvbnN0IGdlbmVyYXRlT3RwID0gKCk9PiB7XHJcbiAgcmV0dXJuIE1hdGguZmxvb3IoMTAwMDAwICsgTWF0aC5yYW5kb20oKSAqIDkwMDAwMCkudG9TdHJpbmcoKTsgLy8gR2VuZXJhdGVzIGEgNi1kaWdpdCBudW1iZXJcclxufVxyXG5cclxuY2xhc3MgdXNlckNvbnRyb2xsZXIge1xyXG4gIGdldEFsbFVzZXJzID0gYXN5bmMocmVxICwgcmVzKT0+e1xyXG4gICAgdHJ5e1xyXG4gICAgICBsZXQgZGF0YSA9IGF3YWl0IHVzZXJTZXJ2aWNlcy5maW5kKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoZGF0YSk7XHJcbiAgICB9Y2F0Y2goZXJyKXtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0VXNlcnMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IGlkID0gcmVxLnBhcmFtcy5pZCB8fCByZXEudXNlci5faWQ7XHJcbiAgICBjb25zb2xlLmxvZyhpZCk7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdXNlclNlcnZpY2VzLmZpbmRCeUlkKGlkKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGRhdGEpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9XHJcbiAgfTtcclxuICBcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICBjcmVhdGUgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSByZXE/LmJvZHk7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlcS5ib2R5KTtcclxuICAgICAgY29uc29sZS5sb2coXCJhYm92ZSB0aGVkYXRhXCIpXHJcbiAgICAgIGNvbnN0IHsgZW1haWwsIHBob25lTm8gLCBmaXJzdE5hbWUsIGxhc3ROYW1lLCBwYXNzd29yZCAsIHJvbGV9ID0gcmVxLmJvZHk7XHJcbiAgICAgIGNvbnN0IGNoZWNrVXNlciA9IGF3YWl0IHVzZXJTZXJ2aWNlcy5maW5kT25lKHtcclxuICAgICAgICAkb3I6IFt7IGVtYWlsIH0sIHsgcGhvbmVObyB9XSxcclxuICAgICAgfSk7XHJcbiAgICAgIGlmIChjaGVja1VzZXIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImNoZWNrdXNlclwiICwgY2hlY2tVc2VyKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHttZXNzYWdlOlwiQWxyZWFkeSByZWdpc3RlcmVkIHdpdGggdGhpcyBjcmVkZW50aWFsc1wifSk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc29sZS5sb2coZW1haWwsIHBob25lTm8sIGZpcnN0TmFtZSwgbGFzdE5hbWUsIHBhc3N3b3JkIClcclxuICAgICAgbGV0IHVzZXIgPSBhd2FpdCB1c2VyU2VydmljZXMuY3JlYXRlKHtlbWFpbCwgcGhvbmVObyAsIGZpcnN0TmFtZSwgbGFzdE5hbWUsIHBhc3N3b3JkICwgcm9sZTpyb2xlIHx8ICdVc2VyJ30pO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQodXNlcik7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcblxyXG5cclxuICBcclxuICAgc2VuZE90cCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gR2V0IGVtYWlsIGZyb20gcmVxdWVzdCBib2R5XHJcbiAgICAgIGNvbnN0IHsgZW1haWwgfSA9IHJlcS5ib2R5O1xyXG4gIFxyXG4gICAgICBpZiAoIWVtYWlsKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0VtYWlsIGlzIHJlcXVpcmVkJyB9KTtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgICBsZXQgb3RwRGF0YSA9IGF3YWl0IE90cC5maW5kT25lKHtlbWFpbH0pO1xyXG4gICAgICBpZihvdHBEYXRhKSByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoe21lc3NhZ2U6YE9UUCBBbHJlYWR5IFNlbnQgdG8gdGhlICR7ZW1haWx9YH0pO1xyXG4gICAgICAvLyBHZW5lcmF0ZSBPVFBcclxuICAgICAgY29uc3Qgb3RwID0gZ2VuZXJhdGVPdHAoKTtcclxuICBcclxuICAgICAgLy8gQ29uZmlndXJlIG5vZGVtYWlsZXIgdHJhbnNwb3J0ICh1c2UgeW91ciBlbWFpbCBzZXJ2aWNlIGNyZWRlbnRpYWxzKVxyXG4gICAgICBsZXQgdHJhbnNwb3J0ZXIgPSBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydCh7XHJcbiAgICAgICAgc2VydmljZTogJ2dtYWlsJywgLy8gVXNlIHlvdXIgZW1haWwgcHJvdmlkZXIsIGxpa2UgJ2dtYWlsJ1xyXG4gICAgICAgIGF1dGg6IHtcclxuICAgICAgICAgIHVzZXI6IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIsIC8vIFlvdXIgZW1haWwgYWRkcmVzc1xyXG4gICAgICAgICAgcGFzczogcHJvY2Vzcy5lbnYuRU1BSUxfUEFTUywgLy8gWW91ciBlbWFpbCBwYXNzd29yZCBvciBhcHAtc3BlY2lmaWMgcGFzc3dvcmRcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICBcclxuICAgICAgLy8gRW1haWwgb3B0aW9uc1xyXG4gICAgICBsZXQgbWFpbE9wdGlvbnMgPSB7XHJcbiAgICAgICAgZnJvbTogcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiwgLy8gU2VuZGVyIGFkZHJlc3NcclxuICAgICAgICB0bzogZW1haWwsIC8vIFJlY2VpdmVyIGVtYWlsXHJcbiAgICAgICAgc3ViamVjdDogJ09UUCBmcm9tIFlvZ2FBcnQnLCAvLyBTdWJqZWN0IGxpbmVcclxuICAgICAgICB0ZXh0OiBgJHtvdHB9IGlzIHRoZSBPVFAgdG8gcmVnaXN0ZXIgaW4gWW9nYUFydGAsIC8vIFBsYWluIHRleHQgYm9keVxyXG4gICAgICB9O1xyXG4gIFxyXG5cclxuICAgICAgLy8gU2VuZCBlbWFpbFxyXG4gICAgICB0cmFuc3BvcnRlci5zZW5kTWFpbChtYWlsT3B0aW9ucywgYXN5bmMgKGVycm9yLCBpbmZvKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyb3Igc2VuZGluZyBlbWFpbCcgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwib3RwIHNlbmRcIik7XHJcbiAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgbGV0IG5ld090cCA9IG5ldyBPdHAoe1xyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIG90cCxcclxuICAgICAgICBpc2dlbmVyYXRlZDp0cnVlXHJcbiAgICAgIH0pO1xyXG4gICAgICBhd2FpdCBuZXdPdHAuc2F2ZSgpO1xyXG5cclxuICAgICAgcmV0dXJuIHJlcy5zZW5kKHttZXNzYWdlOmBvdHAgc2VuZCBzdWNjZXNzZnVsbHkgdG8gdGhlIGVtYWlsICR7ZW1haWx9YH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0FuIGVycm9yIG9jY3VycmVkJyB9KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcbiAgdmVyaWZ5T3RwID0gYXN5bmMocmVxICwgcmVzKT0+e1xyXG4gICAgdHJ5e1xyXG4gICAgICBjb25zdCB7ZW1haWwgLCBvdHB9ID0gcmVxLmJvZHk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVtYWlsICwgb3RwKTtcclxuICAgICAgbGV0IG90cERhdGE9IGF3YWl0IE90cC5maW5kT25lKHtlbWFpbH0pO1xyXG4gICAgICBpZighb3RwRGF0YSl7XHJcbiAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoe21lc3NhZ2U6XCJPVFAgZXhwaXJlZCBwbGVhc2Ugc2VuZCBhZ2FpblwifSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYob3RwIT09b3RwRGF0YS5vdHApIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7bWVzc2FnZTpcIkludmFsaWQgT1RQXCJ9KTtcclxuICAgICAgaWYob3RwPT09b3RwRGF0YS5vdHApIHtcclxuICAgICAgICBhd2FpdCBPdHAuZmluZEJ5SWRBbmREZWxldGUob3RwRGF0YS5faWQpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZCh7dmVyZmllZDp0cnVlfSk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc29sZS5sb2cob3RwRGF0YSk7XHJcbiAgICAgIHJldHVybiByZXMuc2VuZCh7aXN2ZXJpZmllZDp0cnVlfSk7XHJcbiAgICB9Y2F0Y2goZXJyKXtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGxvZ2luID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XHJcbiAgICAgIGNvbnN0IGNoZWNrVXNlciA9IGF3YWl0IHVzZXJTZXJ2aWNlcy5maW5kT25lKHsgZW1haWwgfSk7XHJcbiAgICAgIGlmICghY2hlY2tVc2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHttZXNzYWdlOlwidXNlciBub3QgcmVnaXN0ZXJlZCB3aXRoIHRoaXMgRW1haWwhXCJ9KTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBjaGVja1B3ID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGNoZWNrVXNlci5wYXNzd29yZCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiY2hlY2twd1wiLCBjaGVja1B3KTtcclxuICAgICAgaWYgKCFjaGVja1B3KSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHttZXNzYWdlOlwiSW52YWxpZCBDcmVkZW50aWFsc1wifSk7XHJcbiAgICAgIH1cclxuICAgICAgY2hlY2tVc2VyLmxhc3RMb2dpbiA9IERhdGUubm93KCk7XHJcbiAgICAgIGF3YWl0IGNoZWNrVXNlci5zYXZlKCk7XHJcbiAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgY2hlY2tVc2VyLmdlbmVyYXRlQXV0aFRva2VuKCk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZCh7IHRva2VuICwgcm9sZTpjaGVja1VzZXIucm9sZSB9KTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgdXBkYXRlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBib2R5ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBpZCA9ICByZXE/LnBhcmFtcz8uaWQgfHwgcmVxLnVzZXIuX2lkO1xyXG4gICAgY29uc29sZS5sb2coaWQpO1xyXG4gICAgdHJ5IHtcclxuICBcclxuICAgICAgYXdhaXQgdXNlclNlcnZpY2VzLmZpbmRCeUlkQW5kVXBkYXRlKGlkLCBib2R5KTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHsgbWVzc2FnZTogXCJ1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9XHJcbiAgfTtcclxuICBsb2dpbldpdGhHb29nbGUgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIFxyXG4gIH07XHJcbiAgZGVsZXRlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7fTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgbmV3IHVzZXJDb250cm9sbGVyKCk7XHJcbiJdLCJuYW1lcyI6WyJ1c2VyU2VydmljZXMiLCJiY3J5cHQiLCJub2RlbWFpbGVyIiwiT3RwIiwiZ2VuZXJhdGVPdHAiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0b1N0cmluZyIsInVzZXJDb250cm9sbGVyIiwiZ2V0QWxsVXNlcnMiLCJyZXEiLCJyZXMiLCJkYXRhIiwiZmluZCIsImNvbnNvbGUiLCJsb2ciLCJzdGF0dXMiLCJzZW5kIiwiZXJyIiwiZ2V0VXNlcnMiLCJpZCIsInBhcmFtcyIsInVzZXIiLCJfaWQiLCJmaW5kQnlJZCIsImNyZWF0ZSIsImJvZHkiLCJlbWFpbCIsInBob25lTm8iLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInBhc3N3b3JkIiwicm9sZSIsImNoZWNrVXNlciIsImZpbmRPbmUiLCIkb3IiLCJtZXNzYWdlIiwic2VuZE90cCIsImpzb24iLCJvdHBEYXRhIiwib3RwIiwidHJhbnNwb3J0ZXIiLCJjcmVhdGVUcmFuc3BvcnQiLCJzZXJ2aWNlIiwiYXV0aCIsInByb2Nlc3MiLCJlbnYiLCJFTUFJTF9VU0VSIiwicGFzcyIsIkVNQUlMX1BBU1MiLCJtYWlsT3B0aW9ucyIsImZyb20iLCJ0byIsInN1YmplY3QiLCJ0ZXh0Iiwic2VuZE1haWwiLCJlcnJvciIsImluZm8iLCJuZXdPdHAiLCJpc2dlbmVyYXRlZCIsInNhdmUiLCJ2ZXJpZnlPdHAiLCJmaW5kQnlJZEFuZERlbGV0ZSIsInZlcmZpZWQiLCJpc3ZlcmlmaWVkIiwibG9naW4iLCJjaGVja1B3IiwiY29tcGFyZSIsImxhc3RMb2dpbiIsIkRhdGUiLCJub3ciLCJ0b2tlbiIsImdlbmVyYXRlQXV0aFRva2VuIiwidXBkYXRlIiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJsb2dpbldpdGhHb29nbGUiLCJkZWxldGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./controllers/user.js\n");

/***/ }),

/***/ "(api)/./middleware/Auth.js":
/*!****************************!*\
  !*** ./middleware/Auth.js ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst jwt = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\nconst Auth = (handler)=>async (req, res)=>{\n        try {\n            // console.log(req.headers);\n            // console.log(req.headers.authorization);\n            // console.log(req.url);\n            if (!req?.headers?.authorization) {\n                // console.log(\"enter\")\n                return res.status(400).send({\n                    error: true,\n                    message: \"Login First\"\n                });\n            }\n            const decode = jwt.verify(req.headers.authorization, process.env.JSONTOKEN_SECRET_KEY);\n            // console.log(decode)\n            if (!decode) {\n                return res.status(400).json({\n                    message: \"invalid user\"\n                });\n            }\n            req.user = decode;\n            return handler(req, res);\n        } catch (err) {\n            console.log(err);\n        }\n    };\nmodule.exports.Auth = Auth;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9taWRkbGV3YXJlL0F1dGguanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU1BLE1BQU1DLG1CQUFPQSxDQUFDLGtDQUFjO0FBRWxDLE1BQU1DLE9BQU8sQ0FBQ0MsVUFBWSxPQUFPQyxLQUFLQztRQUNwQyxJQUFJO1lBQ0YsNEJBQTRCO1lBQzVCLDBDQUEwQztZQUMxQyx3QkFBd0I7WUFDeEIsSUFBRyxDQUFDRCxLQUFLRSxTQUFTQyxlQUFjO2dCQUM5Qix1QkFBdUI7Z0JBQ3ZCLE9BQU9GLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUNDLE9BQU07b0JBQU9DLFNBQVE7Z0JBQWE7WUFDakU7WUFDQSxNQUFNQyxTQUFTWixJQUFJYSxNQUFNLENBQ3ZCVCxJQUFJRSxPQUFPLENBQUNDLGFBQWEsRUFDekJPLFFBQVFDLEdBQUcsQ0FBQ0Msb0JBQW9CO1lBRWxDLHNCQUFzQjtZQUN0QixJQUFJLENBQUNKLFFBQVE7Z0JBQ1gsT0FBT1AsSUFBSUcsTUFBTSxDQUFDLEtBQUtTLElBQUksQ0FBQztvQkFBRU4sU0FBUztnQkFBZTtZQUN4RDtZQUNBUCxJQUFJYyxJQUFJLEdBQUdOO1lBQ1gsT0FBT1QsUUFBUUMsS0FBSUM7UUFDckIsRUFBRSxPQUFPYyxLQUFLO1lBQ1pDLFFBQVFDLEdBQUcsQ0FBQ0Y7UUFDZDtJQUNGO0FBQ0FHLG1CQUFtQixHQUFHcEIiLCJzb3VyY2VzIjpbIkY6XFx5b2dhQXBwXFxtaWRkbGV3YXJlXFxBdXRoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGp3dCA9IHJlcXVpcmUoXCJqc29ud2VidG9rZW5cIik7XHJcblxyXG5jb25zdCBBdXRoID0gKGhhbmRsZXIpID0+IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhyZXEuaGVhZGVycyk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhyZXEuaGVhZGVycy5hdXRob3JpemF0aW9uKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKHJlcS51cmwpO1xyXG4gICAgaWYoIXJlcT8uaGVhZGVycz8uYXV0aG9yaXphdGlvbil7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiZW50ZXJcIilcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHtlcnJvcjp0cnVlICwgbWVzc2FnZTpcIkxvZ2luIEZpcnN0XCJ9KTtcclxuICAgIH1cclxuICAgIGNvbnN0IGRlY29kZSA9IGp3dC52ZXJpZnkoXHJcbiAgICAgIHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24sXHJcbiAgICAgIHByb2Nlc3MuZW52LkpTT05UT0tFTl9TRUNSRVRfS0VZXHJcbiAgICApO1xyXG4gICAgLy8gY29uc29sZS5sb2coZGVjb2RlKVxyXG4gICAgaWYgKCFkZWNvZGUpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJpbnZhbGlkIHVzZXJcIiB9KTtcclxuICAgIH1cclxuICAgIHJlcS51c2VyID0gZGVjb2RlO1xyXG4gICAgcmV0dXJuIGhhbmRsZXIocmVxLHJlcyk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gIH1cclxufTtcclxubW9kdWxlLmV4cG9ydHMuQXV0aCA9IEF1dGg7XHJcbiJdLCJuYW1lcyI6WyJqd3QiLCJyZXF1aXJlIiwiQXV0aCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInN0YXR1cyIsInNlbmQiLCJlcnJvciIsIm1lc3NhZ2UiLCJkZWNvZGUiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiSlNPTlRPS0VOX1NFQ1JFVF9LRVkiLCJqc29uIiwidXNlciIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJtb2R1bGUiLCJleHBvcnRzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./middleware/Auth.js\n");

/***/ }),

/***/ "(api)/./models/Otp.js":
/*!***********************!*\
  !*** ./models/Otp.js ***!
  \***********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\nconst otpSchema = mongoose.Schema({\n    email: {\n        type: String\n    },\n    otp: {\n        type: String\n    },\n    isgenerated: {\n        type: Boolean,\n        default: false\n    },\n    createdAt: {\n        type: Date,\n        default: Date.now,\n        expires: 120\n    }\n});\nmodule.exports.Otp = mongoose.models.Otp || mongoose.model(\"Otp\", otpSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvT3RwLmpzIiwibWFwcGluZ3MiOiI7QUFBQSxNQUFNQSxXQUFXQyxtQkFBT0EsQ0FBQywwQkFBVTtBQUVuQyxNQUFNQyxZQUFZRixTQUFTRyxNQUFNLENBQUM7SUFDL0JDLE9BQU07UUFDTEMsTUFBS0M7SUFDTjtJQUNBQyxLQUFJO1FBQ0hGLE1BQUtDO0lBQ047SUFDQUUsYUFBWTtRQUNYSCxNQUFLSTtRQUNMQyxTQUFRO0lBQ1Q7SUFDQUMsV0FBVztRQUNWTixNQUFNTztRQUNORixTQUFTRSxLQUFLQyxHQUFHO1FBQ2pCQyxTQUFTO0lBQ1g7QUFDRjtBQUVBQyxrQkFBa0IsR0FBSWYsU0FBU2tCLE1BQU0sQ0FBQ0QsR0FBRyxJQUFJakIsU0FBU21CLEtBQUssQ0FBQyxPQUFPakIiLCJzb3VyY2VzIjpbIkY6XFx5b2dhQXBwXFxtb2RlbHNcXE90cC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcclxuXHJcbmNvbnN0IG90cFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgIGVtYWlsOntcclxuICAgIHR5cGU6U3RyaW5nXHJcbiAgIH0sXHJcbiAgIG90cDp7XHJcbiAgICB0eXBlOlN0cmluZ1xyXG4gICB9LFxyXG4gICBpc2dlbmVyYXRlZDp7XHJcbiAgICB0eXBlOkJvb2xlYW4sXHJcbiAgICBkZWZhdWx0OmZhbHNlXHJcbiAgIH0sXHJcbiAgIGNyZWF0ZWRBdDoge1xyXG4gICAgdHlwZTogRGF0ZSxcclxuICAgIGRlZmF1bHQ6IERhdGUubm93LFxyXG4gICAgZXhwaXJlczogMTIwLCAvLyBUaGlzIG1ha2VzIHRoZSBkb2N1bWVudCBhdXRvbWF0aWNhbGx5IGRlbGV0ZWQgYWZ0ZXIgMSBtaW51dGVzIChvcHRpb25hbClcclxuICB9LFxyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzLk90cCA9ICBtb25nb29zZS5tb2RlbHMuT3RwIHx8IG1vbmdvb3NlLm1vZGVsKFwiT3RwXCIsIG90cFNjaGVtYSk7Il0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsIm90cFNjaGVtYSIsIlNjaGVtYSIsImVtYWlsIiwidHlwZSIsIlN0cmluZyIsIm90cCIsImlzZ2VuZXJhdGVkIiwiQm9vbGVhbiIsImRlZmF1bHQiLCJjcmVhdGVkQXQiLCJEYXRlIiwibm93IiwiZXhwaXJlcyIsIm1vZHVsZSIsImV4cG9ydHMiLCJPdHAiLCJtb2RlbHMiLCJtb2RlbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./models/Otp.js\n");

/***/ }),

/***/ "(api)/./models/User.js":
/*!************************!*\
  !*** ./models/User.js ***!
  \************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\nconst bcrypt = __webpack_require__(/*! bcrypt */ \"bcrypt\");\nconst jwt = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\nconst userSchema = mongoose.Schema({\n    firstName: {\n        type: String\n    },\n    lastName: {\n        type: String\n    },\n    role: {\n        type: String,\n        default: \"user\"\n    },\n    email: {\n        type: String\n    },\n    country: {\n        type: String\n    },\n    state: {\n        type: String\n    },\n    city: {\n        type: String\n    },\n    pincode: {\n        type: String\n    },\n    phoneNo: {\n        type: Number\n    },\n    OTP: {\n        type: String\n    },\n    isGeneratedOTP: {\n        type: Boolean\n    },\n    password: {\n        type: String\n    },\n    lastLogin: {\n        type: Date,\n        default: Date.now\n    }\n});\nuserSchema.pre(\"save\", async function(next) {\n    if (!this.isModified(\"password\")) {\n        return next();\n    }\n    console.log(this.password);\n    console.log(typeof this.password);\n    if (!this.password) {\n        return next();\n    }\n    try {\n        const salt = await bcrypt.genSalt(10);\n        console.log(salt);\n        const hashedPassword = await bcrypt.hash(this.password, salt);\n        this.password = hashedPassword;\n        next();\n    } catch (error) {\n        next(error);\n    }\n});\nuserSchema.methods.generateAuthToken = async function() {\n    const token = jwt.sign({\n        name: this.name,\n        email: this.email,\n        _id: this._id,\n        role: this.role\n    }, process.env.JSONTOKEN_SECRET_KEY);\n    await this.save();\n    return token;\n};\nconst User = mongoose.models.User || mongoose.model(\"User\", userSchema);\nmodule.exports = User;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvVXNlci5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsTUFBTUEsV0FBV0MsbUJBQU9BLENBQUMsMEJBQVU7QUFDbkMsTUFBTUMsU0FBU0QsbUJBQU9BLENBQUMsc0JBQVE7QUFDL0IsTUFBTUUsTUFBTUYsbUJBQU9BLENBQUMsa0NBQWM7QUFDbEMsTUFBTUcsYUFBYUosU0FBU0ssTUFBTSxDQUFDO0lBQ2pDQyxXQUFXO1FBQ1RDLE1BQU1DO0lBQ1I7SUFDQUMsVUFBVTtRQUNSRixNQUFNQztJQUNSO0lBQ0FFLE1BQUs7UUFDSEgsTUFBS0M7UUFDTEcsU0FBUTtJQUNWO0lBQ0FDLE9BQU87UUFDTEwsTUFBTUM7SUFDUjtJQUNBSyxTQUFTO1FBQ1BOLE1BQU1DO0lBQ1I7SUFDQU0sT0FBTTtRQUNKUCxNQUFLQztJQUNQO0lBQ0FPLE1BQU07UUFDSlIsTUFBTUM7SUFDUjtJQUNBUSxTQUFTO1FBQ1BULE1BQU1DO0lBQ1I7SUFDQVMsU0FBUztRQUNQVixNQUFNVztJQUNSO0lBQ0FDLEtBQUk7UUFDRlosTUFBS0M7SUFDUDtJQUNBWSxnQkFBZTtRQUNiYixNQUFLYztJQUNQO0lBR0FDLFVBQVU7UUFDUmYsTUFBTUM7SUFDUjtJQUNBZSxXQUFXO1FBQUVoQixNQUFNaUI7UUFBTWIsU0FBU2EsS0FBS0MsR0FBRztJQUFDO0FBRzdDO0FBRUFyQixXQUFXc0IsR0FBRyxDQUFDLFFBQVEsZUFBZ0JDLElBQUk7SUFDekMsSUFBSSxDQUFDLElBQUksQ0FBQ0MsVUFBVSxDQUFDLGFBQWE7UUFDaEMsT0FBT0Q7SUFDVDtJQUNBRSxRQUFRQyxHQUFHLENBQUMsSUFBSSxDQUFDUixRQUFRO0lBQ3pCTyxRQUFRQyxHQUFHLENBQUMsT0FBTyxJQUFJLENBQUNSLFFBQVE7SUFDaEMsSUFBSSxDQUFDLElBQUksQ0FBQ0EsUUFBUSxFQUFFO1FBQ2xCLE9BQU9LO0lBQ1Q7SUFDQSxJQUFJO1FBQ0YsTUFBTUksT0FBTyxNQUFNN0IsT0FBTzhCLE9BQU8sQ0FBQztRQUNsQ0gsUUFBUUMsR0FBRyxDQUFDQztRQUVaLE1BQU1FLGlCQUFpQixNQUFNL0IsT0FBT2dDLElBQUksQ0FBQyxJQUFJLENBQUNaLFFBQVEsRUFBRVM7UUFFeEQsSUFBSSxDQUFDVCxRQUFRLEdBQUdXO1FBRWhCTjtJQUNGLEVBQUUsT0FBT1EsT0FBTztRQUNkUixLQUFLUTtJQUNQO0FBQ0Y7QUFFQS9CLFdBQVdnQyxPQUFPLENBQUNDLGlCQUFpQixHQUFHO0lBQ3JDLE1BQU1DLFFBQVFuQyxJQUFJb0MsSUFBSSxDQUNwQjtRQUFFQyxNQUFNLElBQUksQ0FBQ0EsSUFBSTtRQUFFNUIsT0FBTyxJQUFJLENBQUNBLEtBQUs7UUFBRTZCLEtBQUssSUFBSSxDQUFDQSxHQUFHO1FBQUcvQixNQUFLLElBQUksQ0FBQ0EsSUFBSTtJQUFBLEdBQ3BFZ0MsUUFBUUMsR0FBRyxDQUFDQyxvQkFBb0I7SUFFbEMsTUFBTSxJQUFJLENBQUNDLElBQUk7SUFDZixPQUFPUDtBQUNUO0FBRUEsTUFBTVEsT0FBTzlDLFNBQVMrQyxNQUFNLENBQUNELElBQUksSUFBSTlDLFNBQVNnRCxLQUFLLENBQUMsUUFBUTVDO0FBQzVENkMsT0FBT0MsT0FBTyxHQUFHSiIsInNvdXJjZXMiOlsiRjpcXHlvZ2FBcHBcXG1vZGVsc1xcVXNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcclxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZShcImJjcnlwdFwiKTtcclxuY29uc3Qgand0ID0gcmVxdWlyZShcImpzb253ZWJ0b2tlblwiKTtcclxuY29uc3QgdXNlclNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgZmlyc3ROYW1lOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgfSxcclxuICBsYXN0TmFtZToge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gIH0sXHJcbiAgcm9sZTp7XHJcbiAgICB0eXBlOlN0cmluZyxcclxuICAgIGRlZmF1bHQ6XCJ1c2VyXCJcclxuICB9LFxyXG4gIGVtYWlsOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgfSxcclxuICBjb3VudHJ5OiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgfSxcclxuICBzdGF0ZTp7XHJcbiAgICB0eXBlOlN0cmluZ1xyXG4gIH0sXHJcbiAgY2l0eToge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gIH0sXHJcbiAgcGluY29kZToge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gIH0sXHJcbiAgcGhvbmVObzoge1xyXG4gICAgdHlwZTogTnVtYmVyLFxyXG4gIH0sXHJcbiAgT1RQOntcclxuICAgIHR5cGU6U3RyaW5nXHJcbiAgfSxcclxuICBpc0dlbmVyYXRlZE9UUDp7XHJcbiAgICB0eXBlOkJvb2xlYW5cclxuICB9LFxyXG5cclxuXHJcbiAgcGFzc3dvcmQ6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICB9LFxyXG4gIGxhc3RMb2dpbjogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9LFxyXG5cclxuXHJcbn0pO1xyXG5cclxudXNlclNjaGVtYS5wcmUoXCJzYXZlXCIsIGFzeW5jIGZ1bmN0aW9uIChuZXh0KSB7XHJcbiAgaWYgKCF0aGlzLmlzTW9kaWZpZWQoXCJwYXNzd29yZFwiKSkge1xyXG4gICAgcmV0dXJuIG5leHQoKTtcclxuICB9XHJcbiAgY29uc29sZS5sb2codGhpcy5wYXNzd29yZCk7XHJcbiAgY29uc29sZS5sb2codHlwZW9mIHRoaXMucGFzc3dvcmQpO1xyXG4gIGlmICghdGhpcy5wYXNzd29yZCkge1xyXG4gICAgcmV0dXJuIG5leHQoKTtcclxuICB9XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNhbHQgPSBhd2FpdCBiY3J5cHQuZ2VuU2FsdCgxMCk7XHJcbiAgICBjb25zb2xlLmxvZyhzYWx0KTtcclxuXHJcbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHRoaXMucGFzc3dvcmQsIHNhbHQpO1xyXG5cclxuICAgIHRoaXMucGFzc3dvcmQgPSBoYXNoZWRQYXNzd29yZDtcclxuXHJcbiAgICBuZXh0KCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIG5leHQoZXJyb3IpO1xyXG4gIH1cclxufSk7XHJcblxyXG51c2VyU2NoZW1hLm1ldGhvZHMuZ2VuZXJhdGVBdXRoVG9rZW4gPSBhc3luYyBmdW5jdGlvbiAoKSB7XHJcbiAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihcclxuICAgIHsgbmFtZTogdGhpcy5uYW1lLCBlbWFpbDogdGhpcy5lbWFpbCwgX2lkOiB0aGlzLl9pZCAsIHJvbGU6dGhpcy5yb2xlfSxcclxuICAgIHByb2Nlc3MuZW52LkpTT05UT0tFTl9TRUNSRVRfS0VZXHJcbiAgKTtcclxuICBhd2FpdCB0aGlzLnNhdmUoKTtcclxuICByZXR1cm4gdG9rZW47XHJcbn07XHJcblxyXG5jb25zdCBVc2VyID0gbW9uZ29vc2UubW9kZWxzLlVzZXIgfHwgbW9uZ29vc2UubW9kZWwoXCJVc2VyXCIsIHVzZXJTY2hlbWEpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IFVzZXI7XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJiY3J5cHQiLCJqd3QiLCJ1c2VyU2NoZW1hIiwiU2NoZW1hIiwiZmlyc3ROYW1lIiwidHlwZSIsIlN0cmluZyIsImxhc3ROYW1lIiwicm9sZSIsImRlZmF1bHQiLCJlbWFpbCIsImNvdW50cnkiLCJzdGF0ZSIsImNpdHkiLCJwaW5jb2RlIiwicGhvbmVObyIsIk51bWJlciIsIk9UUCIsImlzR2VuZXJhdGVkT1RQIiwiQm9vbGVhbiIsInBhc3N3b3JkIiwibGFzdExvZ2luIiwiRGF0ZSIsIm5vdyIsInByZSIsIm5leHQiLCJpc01vZGlmaWVkIiwiY29uc29sZSIsImxvZyIsInNhbHQiLCJnZW5TYWx0IiwiaGFzaGVkUGFzc3dvcmQiLCJoYXNoIiwiZXJyb3IiLCJtZXRob2RzIiwiZ2VuZXJhdGVBdXRoVG9rZW4iLCJ0b2tlbiIsInNpZ24iLCJuYW1lIiwiX2lkIiwicHJvY2VzcyIsImVudiIsIkpTT05UT0tFTl9TRUNSRVRfS0VZIiwic2F2ZSIsIlVzZXIiLCJtb2RlbHMiLCJtb2RlbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./models/User.js\n");

/***/ }),

/***/ "(api)/./pages/api/user/user.js":
/*!********************************!*\
  !*** ./pages/api/user/user.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _controllers_user__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../controllers/user */ \"(api)/./controllers/user.js\");\n/* harmony import */ var _middleware_Auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../middleware/Auth */ \"(api)/./middleware/Auth.js\");\n\n\nasync function handler(req, res) {\n    const { action } = req.query;\n    console.log(action);\n    switch(action){\n        case \"getAllUser\":\n            await _controllers_user__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getAllUsers(req, res);\n            break;\n        case \"getUser\":\n            await (0,_middleware_Auth__WEBPACK_IMPORTED_MODULE_1__.Auth)(async (req, res)=>{\n                await _controllers_user__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getUsers(req, res);\n            })(req, res);\n            break;\n        case \"login\":\n            await _controllers_user__WEBPACK_IMPORTED_MODULE_0__[\"default\"].login(req, res);\n            break;\n        case \"signup\":\n            await _controllers_user__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create(req, res);\n            break;\n        case \"getOtp\":\n            await _controllers_user__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sendOtp(req, res);\n            break;\n        case \"verifyOtp\":\n            await _controllers_user__WEBPACK_IMPORTED_MODULE_0__[\"default\"].verifyOtp(req, res);\n            break;\n        default:\n            res.status(404).send({\n                error: \"Invalid action\"\n            });\n    }\n} // pages/api/user/user.js\n // export default async function handler(req, res) {\n //   if (req.method === 'GET') {\n //     try {\n //       return await userController.getAllUsers(req, res);\n //     } catch (error) {\n //       res.status(500).send({ error: 'An error occurred' });\n //     }\n //   }\n //   // Handle other HTTP methods if needed (e.g., POST, PUT)\n //   res.status(405).send({ error: 'Method Not Allowed' }); // Handle invalid methods\n // }\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvdXNlci91c2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFzRDtBQUNOO0FBRWpDLGVBQWVFLFFBQVFDLEdBQUcsRUFBRUMsR0FBRztJQUM1QyxNQUFNLEVBQUVDLE1BQU0sRUFBRSxHQUFHRixJQUFJRyxLQUFLO0lBQzVCQyxRQUFRQyxHQUFHLENBQUNIO0lBRVosT0FBUUE7UUFDTixLQUFLO1lBQ0QsTUFBTUwscUVBQTBCLENBQUNHLEtBQU1DO1lBQ3ZDO1FBQ0osS0FBSztZQUNELE1BQU1ILHNEQUFJQSxDQUFDLE9BQU9FLEtBQUtDO2dCQUN2QixNQUFNSixrRUFBdUIsQ0FBQ0csS0FBS0M7WUFDckMsR0FBR0QsS0FBSUM7WUFFUDtRQUNGLEtBQUs7WUFDSCxNQUFNSiwrREFBb0IsQ0FBQ0csS0FBS0M7WUFDaEM7UUFDRixLQUFLO1lBQ0gsTUFBTUosZ0VBQXFCLENBQUNHLEtBQUtDO1lBQ2pDO1FBQ0YsS0FBSztZQUNILE1BQU1KLGlFQUFzQixDQUFDRyxLQUFLQztZQUNsQztRQUNGLEtBQUs7WUFDSCxNQUFNSixtRUFBd0IsQ0FBQ0csS0FBS0M7WUFDcEM7UUFDRjtZQUNFQSxJQUFJVyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQWlCO0lBQ25EO0FBQ0YsRUFFQSx5QkFBeUI7Q0FHekIsb0RBQW9EO0NBQ3BELGdDQUFnQztDQUNoQyxZQUFZO0NBQ1osMkRBQTJEO0NBQzNELHdCQUF3QjtDQUN4Qiw4REFBOEQ7Q0FDOUQsUUFBUTtDQUNSLE1BQU07Q0FFTiw2REFBNkQ7Q0FDN0QscUZBQXFGO0NBQ3JGLElBQUkiLCJzb3VyY2VzIjpbIkY6XFx5b2dhQXBwXFxwYWdlc1xcYXBpXFx1c2VyXFx1c2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB1c2VyQ29udHJvbGxlciBmcm9tICcuLi8uLi8uLi9jb250cm9sbGVycy91c2VyJ1xyXG5pbXBvcnQgeyBBdXRoIH0gZnJvbSAnLi4vLi4vLi4vbWlkZGxld2FyZS9BdXRoJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICBjb25zdCB7IGFjdGlvbiB9ID0gcmVxLnF1ZXJ5O1xyXG4gIGNvbnNvbGUubG9nKGFjdGlvbik7XHJcblxyXG4gIHN3aXRjaCAoYWN0aW9uKSB7XHJcbiAgICBjYXNlIFwiZ2V0QWxsVXNlclwiOlxyXG4gICAgICAgIGF3YWl0IHVzZXJDb250cm9sbGVyLmdldEFsbFVzZXJzKHJlcSAsIHJlcyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwiZ2V0VXNlclwiOlxyXG4gICAgICAgIGF3YWl0IEF1dGgoYXN5bmMgKHJlcSAscmVzKT0+e1xyXG4gICAgICAgIGF3YWl0IHVzZXJDb250cm9sbGVyLmdldFVzZXJzKHJlcSwgcmVzKTtcclxuICAgICAgfSkocmVxLHJlcyk7XHJcbiAgICAgIFxyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgXCJsb2dpblwiOlxyXG4gICAgICBhd2FpdCB1c2VyQ29udHJvbGxlci5sb2dpbihyZXEsIHJlcyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcInNpZ251cFwiOlxyXG4gICAgICBhd2FpdCB1c2VyQ29udHJvbGxlci5jcmVhdGUocmVxLCByZXMpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgXCJnZXRPdHBcIjpcclxuICAgICAgYXdhaXQgdXNlckNvbnRyb2xsZXIuc2VuZE90cChyZXEsIHJlcyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcInZlcmlmeU90cFwiOlxyXG4gICAgICBhd2FpdCB1c2VyQ29udHJvbGxlci52ZXJpZnlPdHAocmVxLCByZXMpO1xyXG4gICAgICBicmVhaztcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgZXJyb3I6IFwiSW52YWxpZCBhY3Rpb25cIiB9KTtcclxuICB9XHJcbn1cclxuXHJcbi8vIHBhZ2VzL2FwaS91c2VyL3VzZXIuanNcclxuXHJcblxyXG4vLyBleHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XHJcbi8vICAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XHJcbi8vICAgICB0cnkge1xyXG4vLyAgICAgICByZXR1cm4gYXdhaXQgdXNlckNvbnRyb2xsZXIuZ2V0QWxsVXNlcnMocmVxLCByZXMpO1xyXG4vLyAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBlcnJvcjogJ0FuIGVycm9yIG9jY3VycmVkJyB9KTtcclxuLy8gICAgIH1cclxuLy8gICB9XHJcbiAgXHJcbi8vICAgLy8gSGFuZGxlIG90aGVyIEhUVFAgbWV0aG9kcyBpZiBuZWVkZWQgKGUuZy4sIFBPU1QsIFBVVClcclxuLy8gICByZXMuc3RhdHVzKDQwNSkuc2VuZCh7IGVycm9yOiAnTWV0aG9kIE5vdCBBbGxvd2VkJyB9KTsgLy8gSGFuZGxlIGludmFsaWQgbWV0aG9kc1xyXG4vLyB9XHJcblxyXG4iXSwibmFtZXMiOlsidXNlckNvbnRyb2xsZXIiLCJBdXRoIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImFjdGlvbiIsInF1ZXJ5IiwiY29uc29sZSIsImxvZyIsImdldEFsbFVzZXJzIiwiZ2V0VXNlcnMiLCJsb2dpbiIsImNyZWF0ZSIsInNlbmRPdHAiLCJ2ZXJpZnlPdHAiLCJzdGF0dXMiLCJzZW5kIiwiZXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/user/user.js\n");

/***/ }),

/***/ "(api)/./services/BasicService.js":
/*!**********************************!*\
  !*** ./services/BasicService.js ***!
  \**********************************/
/***/ ((module) => {

eval("\nclass BasicService {\n    constructor(model){\n        this.create = (body)=>{\n            return this.model.create(body);\n        };\n        this.find = (body)=>{\n            return this.model.find(body);\n        };\n        this.findOne = (filter)=>{\n            return this.model.findOne(filter);\n        };\n        this.findById = (id)=>{\n            return this.model.findById(id);\n        };\n        this.findByIdAndUpdate = async (id, Object, projection)=>{\n            return this.model.findByIdAndUpdate(id, Object, projection);\n        };\n        this.updateMany = async (selector, object)=>{\n            return this.model.updateMany(object);\n        };\n        this.findByIdAndDelete = (id)=>{\n            return this.model.findByIdAndDelete(id);\n        };\n        this.model = model;\n    }\n}\nmodule.exports.BasicService = BasicService;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zZXJ2aWNlcy9CYXNpY1NlcnZpY2UuanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU1BO0lBQ0pDLFlBQVlDLEtBQUssQ0FBRTthQUluQkMsU0FBUyxDQUFDQztZQUNSLE9BQU8sSUFBSSxDQUFDRixLQUFLLENBQUNDLE1BQU0sQ0FBQ0M7UUFDM0I7YUFDQUMsT0FBTyxDQUFDRDtZQUNOLE9BQU8sSUFBSSxDQUFDRixLQUFLLENBQUNHLElBQUksQ0FBQ0Q7UUFDekI7YUFDQUUsVUFBVSxDQUFDQztZQUNULE9BQU8sSUFBSSxDQUFDTCxLQUFLLENBQUNJLE9BQU8sQ0FBQ0M7UUFDNUI7YUFDQUMsV0FBVyxDQUFDQztZQUNWLE9BQU8sSUFBSSxDQUFDUCxLQUFLLENBQUNNLFFBQVEsQ0FBQ0M7UUFDN0I7YUFDQUMsb0JBQW9CLE9BQU9ELElBQUlFLFFBQVFDO1lBQ3JDLE9BQU8sSUFBSSxDQUFDVixLQUFLLENBQUNRLGlCQUFpQixDQUFDRCxJQUFJRSxRQUFRQztRQUNsRDthQUNBQyxhQUFhLE9BQU1DLFVBQVdDO1lBQzVCLE9BQU8sSUFBSSxDQUFDYixLQUFLLENBQUNXLFVBQVUsQ0FBQ0U7UUFDL0I7YUFDQUMsb0JBQW9CLENBQUNQO1lBQ25CLE9BQU8sSUFBSSxDQUFDUCxLQUFLLENBQUNjLGlCQUFpQixDQUFDUDtRQUN0QztRQXZCRSxJQUFJLENBQUNQLEtBQUssR0FBR0E7SUFDZjtBQXVCRjtBQUVBZSwyQkFBMkIsR0FBR2pCIiwic291cmNlcyI6WyJGOlxceW9nYUFwcFxcc2VydmljZXNcXEJhc2ljU2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBCYXNpY1NlcnZpY2Uge1xyXG4gIGNvbnN0cnVjdG9yKG1vZGVsKSB7XHJcbiAgICB0aGlzLm1vZGVsID0gbW9kZWw7XHJcbiAgfVxyXG5cclxuICBjcmVhdGUgPSAoYm9keSkgPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMubW9kZWwuY3JlYXRlKGJvZHkpO1xyXG4gIH07XHJcbiAgZmluZCA9IChib2R5KSA9PiB7XHJcbiAgICByZXR1cm4gdGhpcy5tb2RlbC5maW5kKGJvZHkpO1xyXG4gIH07XHJcbiAgZmluZE9uZSA9IChmaWx0ZXIpID0+IHtcclxuICAgIHJldHVybiB0aGlzLm1vZGVsLmZpbmRPbmUoZmlsdGVyKTtcclxuICB9O1xyXG4gIGZpbmRCeUlkID0gKGlkKSA9PiB7XHJcbiAgICByZXR1cm4gdGhpcy5tb2RlbC5maW5kQnlJZChpZCk7XHJcbiAgfTtcclxuICBmaW5kQnlJZEFuZFVwZGF0ZSA9IGFzeW5jIChpZCwgT2JqZWN0LCBwcm9qZWN0aW9uKSA9PiB7XHJcbiAgICByZXR1cm4gdGhpcy5tb2RlbC5maW5kQnlJZEFuZFVwZGF0ZShpZCwgT2JqZWN0LCBwcm9qZWN0aW9uKTtcclxuICB9O1xyXG4gIHVwZGF0ZU1hbnkgPSBhc3luYyhzZWxlY3RvciAsIG9iamVjdCk9PntcclxuICAgIHJldHVybiB0aGlzLm1vZGVsLnVwZGF0ZU1hbnkob2JqZWN0KTtcclxuICB9XHJcbiAgZmluZEJ5SWRBbmREZWxldGUgPSAoaWQpID0+IHtcclxuICAgIHJldHVybiB0aGlzLm1vZGVsLmZpbmRCeUlkQW5kRGVsZXRlKGlkKTtcclxuICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5CYXNpY1NlcnZpY2UgPSBCYXNpY1NlcnZpY2U7XHJcbiJdLCJuYW1lcyI6WyJCYXNpY1NlcnZpY2UiLCJjb25zdHJ1Y3RvciIsIm1vZGVsIiwiY3JlYXRlIiwiYm9keSIsImZpbmQiLCJmaW5kT25lIiwiZmlsdGVyIiwiZmluZEJ5SWQiLCJpZCIsImZpbmRCeUlkQW5kVXBkYXRlIiwiT2JqZWN0IiwicHJvamVjdGlvbiIsInVwZGF0ZU1hbnkiLCJzZWxlY3RvciIsIm9iamVjdCIsImZpbmRCeUlkQW5kRGVsZXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./services/BasicService.js\n");

/***/ }),

/***/ "(api)/./services/user.service.js":
/*!**********************************!*\
  !*** ./services/user.service.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _BasicService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BasicService */ \"(api)/./services/BasicService.js\");\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/User */ \"(api)/./models/User.js\");\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_models_User__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass userService extends _BasicService__WEBPACK_IMPORTED_MODULE_0__.BasicService {\n    constructor(){\n        super((_models_User__WEBPACK_IMPORTED_MODULE_1___default()));\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new userService());\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zZXJ2aWNlcy91c2VyLnNlcnZpY2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE4QztBQUNaO0FBRWxDLE1BQU1FLG9CQUFvQkYsdURBQVlBO0lBQ2xDRyxhQUFhO1FBQ1QsS0FBSyxDQUFDRixxREFBSUE7SUFDZDtBQUNKO0FBRUEsaUVBQWUsSUFBSUMsYUFBYUEsRUFBQyIsInNvdXJjZXMiOlsiRjpcXHlvZ2FBcHBcXHNlcnZpY2VzXFx1c2VyLnNlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzaWNTZXJ2aWNlIH0gZnJvbSBcIi4vQmFzaWNTZXJ2aWNlXCI7XHJcbmltcG9ydCBVc2VyIGZyb20gXCIuLi9tb2RlbHMvVXNlclwiO1xyXG5cclxuY2xhc3MgdXNlclNlcnZpY2UgZXh0ZW5kcyBCYXNpY1NlcnZpY2V7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIHN1cGVyKFVzZXIpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyB1c2VyU2VydmljZSgpOyJdLCJuYW1lcyI6WyJCYXNpY1NlcnZpY2UiLCJVc2VyIiwidXNlclNlcnZpY2UiLCJjb25zdHJ1Y3RvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./services/user.service.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Fuser&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cuser.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();